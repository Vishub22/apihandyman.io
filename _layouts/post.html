---
layout: default
libs:
  anchor: true
  code: true
  toc: true
---
{% if page.thumbnail %}
  {% assign thumbnail = page.thumbnail %}
{% else %}
  {% assign thumbnail = site.default_thumbnail %}
  {% assign page_thumbnail = '/images' | append: page.permalink | append: 'thumbnail.png' %}
  {% for static_file in site.static_files %}
    {% if static_file.path == page_thumbnail %}
        {% assign thumbnail = page_thumbnail %}
    {% endif %}
  {% endfor %}
{% endif %}

{% if page.series %}
  {% assign title = page.series_title%}
{% else %}
  {% assign title = page.title %}
{% endif %}

    <!-- Modal -->
    <div class="modal fade" id="bookModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">The Design of Web APIs</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Use code {{site.mybook_discount_code}} to get {{site.mybook_discount_rate}} my book The Design of Web APIs (works also on any other Manning product!).
          </div>
          <div class="modal-footer">
            <a href="{{site.mybook}}" target="_blank" class="btn btn-primary">Buy on manning.com</a>
          </div>
        </div>
      </div>
    </div>

<div class="row">
  <!-- LEFT COLUMN HIDDEN WHEN SMALLER THAN LG -->
  <div class="d-none d-md-block col-md-3 col-lg-2 col-xl-2 sticky-top left-column p-0 close-to-main-navbar border-right">
    <div class="container d-flex flex-column h-100 p-0">
      <a class="btn book-button" data-toggle="modal" data-target="#bookModal" role="button" ><img src="/images/commons/book/book-vertical.png" class="img-fluid w-100" alt="The Design of Web APIs book"></a>
      {% if page.series %}
      <!-- Split dropup button -->
      <div class="btn-group">
        <button type="button" class="btn btn-sm dropdown-toggle rounded-0 bg-light border-bottom border-top" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{page.series}}
        </button>
        <div class="dropdown-menu rounded-0">
          {% assign sorted = site.posts | where:"series", page.series | sort:"series_number"  %}
          {% for my_page in sorted %}
            {% if my_page.series_title == page.series_title %}
            <a class="dropdown-item bold">{{ my_page.series_number }} - {{ my_page.series_title }}</a>
            {% else %}
            <a class="dropdown-item" href="{{ my_page.url | prepend: site.baseurl }}">{{ my_page.series_number }} - {{ my_page.series_title }}</a>
            {% endif %}
          {% endfor %}
          {% for coming_soon in site.data.series[page.series] %}
            <a class="dropdown-item disabled">{{ coming_soon.series_number }} - {{ coming_soon.series_title }} (coming soon)</a>
          {% endfor %}
        </div>
      </div>
      {% endif %}
      <div class="flex-grow-1 overflow-auto m-0" id="scrollable-toc">
        {% include toc.html html=content h_min=1 h_max=2 %}
      </div>
    </div>
  </div>
  <!-- MAIN CONTENT-->
  <div class="col-sm-12 col-md-9 col-lg-10 col-xl-10 below-main-navbar">
    <!-- Image and title ? comming from default? -->
      <!-- Author, date and category -->
      <div class="jumbotron pt-1 pb-1">
        {% if page.series %}
        <p class="lead mb-0">{{page.series}} Series Part {{ page.series_number }}</p>
        {% endif%}
        <h1 class="display-4">{{title}}</h1>
        <img src="{{ thumbnail | prepend: site.baseurl | prepend: site.github.url}}" class="img-fluid" alt="post thumbnail">
        <p class="font-weight-lighter">
          {% if page.author %}
          By {{ page.author }}
        {% endif %}
        {% if page.date %}
          {{ page.date | date: "%b. %-d, %Y" }}
        {% endif %}
        <span class="badge badge-pill badge-primary">{{ page.category }}</span>
        </p>
      </div>
      <div class="text-justify anchors">
         {{ content }}
      </div>
  </div>
</div>  

